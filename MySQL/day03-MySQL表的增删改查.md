# MySQL表的增删改查（基础）

本节目标

> - CRUD ：Create（创建），Retrieve（检索），Update（更新），Delete（删除）
> - 新增数据
> - 查阅数据
> - 修改数据
> - 删除数据

## 1、CRUD

- 注释：在SQL中可以使用“--+空格+描述”来表示注释说明
- `CRUD`即增加Create，查找Retrieve，修改Update，删除Delete四个单词的首字母缩写

---

数据库（DB）存在的意义就是用来组织数据的，而数据按照特定的方式组织在一起的目的就是为了让数据库管理系统（DBMS）进行增删改查，那么这部分知识就是MySQL的核心。

作为后端开发，程序员的日常工作很大部分就是写CRUD的代码。而测开工程师，日常工作很大部分就是手工测试，点点点...不要觉得工作中做这种事比较无聊，因为这些才是日常。

## 2、新增（Create）

演示java105数据库中的student表

![image-20230814172523303](C:\Users\14214\AppData\Roaming\Typora\typora-user-images\image-20230814172523303.png)

### ①一次插一行记录

- #### 插所有的列，一次插一行记录

  （列也可称作字段）

  **语法：insert into 表名 values (值，值......)**

  这里的into可以省略，也可以写上，但是建议写上，into后面跟上表名，然后表名后面跟上values,要注意括号里的值要和表里面的列（字段）的个数和类型是匹配的。

  ![image-20230814172454452](C:\Users\14214\AppData\Roaming\Typora\typora-user-images\image-20230814172454452.png)

- 插部分的列，一次插一行记录

  **语法：insert into 表名 (指定的列名1,指定的列名2...)  values (值1,值2...);**

  insert可以只插部分的列，也就是可以“指定列插入”。具体操作就是在values前面加上一个括号，然后括号里面写上你要制定插入的列的列表，多个列之间使用逗号隔开，而values之后的括号里面就是插入的数据。

  要求：插入的列名必须在该表中存在，如果不存在还要插入就会报错。

  

  ![image-20230814170623621](C:\Users\14214\AppData\Roaming\Typora\typora-user-images\image-20230814170623621.png)

### ②一次插多行记录

**语法：insert into 表名   values (值1,值2...), (值3,值4...), (值5,值6)...;**

![image-20230814172345236](C:\Users\14214\AppData\Roaming\Typora\typora-user-images\image-20230814172345236.png)



- **效率问题：**

![image-20230814174348507](C:\Users\14214\AppData\Roaming\Typora\typora-user-images\image-20230814174348507.png)

---

## 3、查询（Retrieve）

SQL中是使用select关键字表示查询。

---

### 3.1 全列查询

```sql 
-- 通常情况下不建议使用 * 进行全列查询
-- 1.查询的列越多，一位这需要传输的数据量越大
-- 2.可能会影响索引的使用（后面会讲）
select * from 表名;
```

### 3.2 指定列查询

```sql 
-- 指定查询的列的顺序不用一定按照定义表的列顺序来
select 列名,列名,列名... from 表名;
```

### 3.3  查询字段为表达式

```SQL
-- 表达式不包含字段
select 列名,列名，10 from 表名;
-- 表达式包含一个字段
select 列名，列名+10 from 表名;
-- 表达式包含多个字段 
select 列名+列名-列名 from 表名;
-- 注意这里的表达式既可以是数字类型的字段与数字的运算，也可以是和数字类型的字段的运算
```

#### 3.4 别名

查询结果中的列指定别名，表示返回的”结果集“中，以别名作为该列的名称，语法：

```sql
select 列名 as 别名 from 表名;
```

### 3.5 去重：DISTINCT

使用distinct（不同）关键字对某列数据进行去重

```sql 
select distinct 列名 from 表名;
```

### 3.6 排序 ORDER BY

```
-- 单个列排序搜索
select 列名,列名... from 表名 order by 待排序列名; -- 默认升序排序
select 列名,列名...  from 表名 order by 待排序列名  asc; -- 升序排序 ascend
select 列名,列名...  from 表名 order by 待排序列名 desc; -- 降序排序 descend

-- 多个列排序搜索
-- 先写的待排序列名的排序优先级高，优先级高的先排序
select 列名,列名... from 表名 order by 待排序列名1，待排序列名2...; -- 都省略了asc
select 列名,列名... from 表名 order by 待排序列名1 desc，待排序列名2 desc; --有优先级且降序排
select 列名,列名... from 表名 order by 待排序列名1，待排序列名2 desc; --无优先级，1升序，2降序
```

### 3.7 条件查询

案例：**

```sql
-- 创建考试成绩表
drop table if exists exam_result;
create table exam_result(
id int,
name varchar(20),
chinese decimal(3,1),
math decimal(3,1),
english decimal(3,1)
);

-- 插入测试数据
insert into exam_result (id,name,chinese,math,english) values
(1,'小明',67,98,56),
(2,'小李',87,51,78),
(3,'小王',87,89,64.4),
(4,'小美',67,84,88),
(5,'小帅',65,76,54),
(6,'小张',77,66,55);
```

---

## MySQL 运算符

本章节我们主要介绍 MySQL 的运算符及运算符的优先级。 MySQL 主要有以下几种运算符：

- 算术运算符
- 比较运算符
- 逻辑运算符
- 位运算符

---

### 算术运算符

MySQL 支持的算术运算符包括:

| 运算符   | 作用 |
| :------- | :--- |
| +        | 加法 |
| -        | 减法 |
| *        | 乘法 |
| / 或 DIV | 除法 |
| % 或 MOD | 取余 |

在除法运算和模运算中，如果除数为0，将是非法除数，返回结果为NULL。

---

### 比较运算符

SELECT 语句中的条件语句经常要使用比较运算符。通过这些比较运算符，可以判断表中的哪些记录是符合条件的。比较结果为真，则返回 1，为假则返回 0，比较结果不确定则返回 NULL。

| 符号            | 描述                       | 备注                                                         |
| :-------------- | :------------------------- | :----------------------------------------------------------- |
| =               | 等于                       |                                                              |
| <>, !=          | 不等于                     |                                                              |
| >               | 大于                       |                                                              |
| <               | 小于                       |                                                              |
| <=              | 小于等于                   |                                                              |
| >=              | 大于等于                   |                                                              |
| BETWEEN         | 在两值之间                 | >=min&&<=max                                                 |
| NOT BETWEEN     | 不在两值之间               |                                                              |
| IN              | 在集合中                   |                                                              |
| NOT IN          | 不在集合中                 |                                                              |
| <=>             | 严格比较两个NULL值是否相等 | 两个操作码均为NULL时，其所得值为1；而当一个操作码为NULL时，其所得值为0 |
| LIKE            | 模糊匹配                   |                                                              |
| REGEXP 或 RLIKE | 正则式匹配                 |                                                              |
| IS NULL         | 为空                       |                                                              |
| IS NOT NULL     | 不为空                     |                                                              |

**计较运算符**

解释：

- **=**
  数学上的=就是表示等于
  编程中将数学中的=纠正为 赋值
  但是SQL中又变成了 = 是等于！！

- **<=>**
  这个符号和=之间的差别是
  NULL = NULL 结果是NULL，相当于false
  NULL <=> NULL 结果是true

- **<>**
  和 ！ 相同,都是表示'不等'的意思，很久以前的编程语言把<>认为是‘不等于’

- **BETWEEN a0 AND a1**
  用来判断当前的值是否在[a,b]区间中，两端都是闭区间。若在则为true。

- **IN(a,b,c......)**
  判定当前的值是否在（）中出现过，出现过则认为是真。通过括号把离散的值收集起来。

- **IS NULL 和 IS NOT NULL**
  分别是用来查看当前值是否为空值，是则true；查看当前值是否非空，是则true。

- **LIKE**

  like表示 模糊匹配 ，不要求相等，只要是符合 通配符 描述的关系就可以了，精度更低一些。

---

### 逻辑运算符

逻辑运算符用来判断表达式的真假。如果表达式是真，结果返回 1。如果表达式是假，结果返回 0。

| 运算符号 | 作用     |
| :------- | :------- |
| NOT 或 ! | 逻辑非   |
| AND      | 逻辑与   |
| OR       | 逻辑或   |
| XOR      | 逻辑异或 |

解释：

and 并且 ( 意同&&)

or 或者 （ 意同||）

NOT或！取反 （ 意同！）

---

### 位运算符

位运算符是在二进制数上进行计算的运算符。位运算会先将操作数变成二进制数，进行位运算。然后再将计算结果从二进制数变回十进制数。

| 运算符号 | 作用     |
| :------- | :------- |
| &        | 按位与   |
| \|       | 按位或   |
| ^        | 按位异或 |
| !        | 取反     |
| <<       | 左移     |
| >>       | 右移     |



---



## 图示（笔记）

![](C:\Users\14214\Pictures\图片笔记\MySQL\MySQL-查询.png)

## 

